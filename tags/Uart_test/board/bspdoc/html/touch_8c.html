<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Board Support Package: common/drivers/touch.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_c5ab7d5005c5f96afef39cd6ff9e2484.html">common</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_640347b79a58de25a4e6f9b018e8e1be.html">drivers</a>
  </div>
</div>
<div class="contents">
<h1>touch.c File Reference</h1>
<p>EFM32GG_DK3750, Touch panel driver.  
<a href="#_details">More...</a></p>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;em_device.h&quot;</code><br/>
<code>#include &quot;em_adc.h&quot;</code><br/>
<code>#include &quot;em_gpio.h&quot;</code><br/>
<code>#include &quot;em_cmu.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="touch_8c_source.html">touch.h</a>&quot;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;calibrate.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="bsp_8h_source.html">bsp.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="i2cdrv_8h_source.html">i2cdrv.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="eeprom_8h_source.html">eeprom.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for touch.c:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c__incl.png" border="0" usemap="#common_2drivers_2touch_8c_map" alt=""/></div>
<map name="common_2drivers_2touch_8c_map" id="common_2drivers_2touch_8c">
<area shape="rect" id="node20" href="bsp_8h.html" title="Board support package API definitions." alt="" coords="845,81,899,108"/><area shape="rect" id="node26" href="i2cdrv_8h.html" title="I2C0 poll based driver for master mode operation on DK." alt="" coords="933,81,1000,108"/><area shape="rect" id="node30" href="eeprom_8h.html" title="EEPROM driver for 24AA024 (2Kbit) EEPROM device on the DK." alt="" coords="744,81,821,108"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c__dep__incl.png" border="0" usemap="#common_2drivers_2touch_8cdep_map" alt=""/></div>
</div>

<p><a href="touch_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a94976268f361ac7a0590250c779ff050">ADC_X</a>&nbsp;&nbsp;&nbsp;adcSingleInpCh1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Input channel 1.  <a href="#a94976268f361ac7a0590250c779ff050"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a7eacc77b3ea51ef3cd8dccff51bace25">ADC_Y</a>&nbsp;&nbsp;&nbsp;adcSingleInpCh4</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Input channel 4.  <a href="#a7eacc77b3ea51ef3cd8dccff51bace25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a68fb42f50f3eb1acfc00869488260dd8">TOUCH_X1</a>&nbsp;&nbsp;&nbsp;gpioPortD, 5</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port D5.  <a href="#a68fb42f50f3eb1acfc00869488260dd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#af14aca3b903c90c70433d41fdb840a93">TOUCH_X2</a>&nbsp;&nbsp;&nbsp;gpioPortD, 4</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port D4.  <a href="#af14aca3b903c90c70433d41fdb840a93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a2168431fed386ed4cfec1127b055652a">TOUCH_Y1</a>&nbsp;&nbsp;&nbsp;gpioPortD, 3</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port D3.  <a href="#a2168431fed386ed4cfec1127b055652a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a347b052e8cb9e548e2aaebbb9d8ed405">TOUCH_Y2</a>&nbsp;&nbsp;&nbsp;gpioPortD, 1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port D2.  <a href="#a347b052e8cb9e548e2aaebbb9d8ed405"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a497f72fae656c2a34ecbb383925825f1">TOUCH_State_TypeDef</a> { <br/>
&nbsp;&nbsp;<b>TOUCH_INIT</b>, 
<br/>
&nbsp;&nbsp;<b>TOUCH_CHECK_PRESS</b>, 
<br/>
&nbsp;&nbsp;<b>TOUCH_MEASURE_X</b>, 
<br/>
&nbsp;&nbsp;<b>TOUCH_MEASURE_Y</b>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>touch driver states </p>
 <a href="touch_8c.html#a497f72fae656c2a34ecbb383925825f1">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a30a86d0450dd72a40b234efc1ff8d3e4">TOUCH_RecalculatePosition</a> (volatile <a class="el" href="structTOUCH__Pos__TypeDef.html">TOUCH_Pos_TypeDef</a> *pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert ADC readings into XY position.  <a href="#a30a86d0450dd72a40b234efc1ff8d3e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#acfb04f99b85cf8e9f5ad80dfb27df268">TOUCH_CallUpcall</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function that calls registered upcall.  <a href="#acfb04f99b85cf8e9f5ad80dfb27df268"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a8c55fa17e3875d085723400d8bce6279">TOUCH_StateChanged</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if cursor state changed (down or move).  <a href="#a8c55fa17e3875d085723400d8bce6279"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#a3611206d185a38b740457a748712c457">ADC0_IRQHandler</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interrupt handler is executed with frequency ~28Hz when panel is not pressed and with frequency ~140Hz when panel is pressed - this will give ~50 readings per second.  <a href="#a3611206d185a38b740457a748712c457"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Touch.html#ga96801185fed6bc54edb1334680c00095">TOUCH_IsBusy</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check status of the touch panel.  <a href="group__Touch.html#ga96801185fed6bc54edb1334680c00095"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Touch.html#ga7998398248274366ad0d8cc3abc63f35">TOUCH_Init</a> (<a class="el" href="structTOUCH__Config__TypeDef.html">TOUCH_Config_TypeDef</a> *config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize touch panel driver.  <a href="group__Touch.html#ga7998398248274366ad0d8cc3abc63f35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTOUCH__Pos__TypeDef.html">TOUCH_Pos_TypeDef</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Touch.html#ga8c35b907b601d52774d63dd6b86ebc83">TOUCH_GetPos</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns current touch position and state.  <a href="group__Touch.html#ga8c35b907b601d52774d63dd6b86ebc83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Touch.html#ga73ede370ca13a936153f8024da5648d3">TOUCH_RegisterUpcall</a> (<a class="el" href="group__Touch.html#gad956bdb4791ddca23a572171e3e77a8a">TOUCH_Upcall_TypeDef</a> *new_upcall)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register upcall which will be call every position or state change.  <a href="group__Touch.html#ga73ede370ca13a936153f8024da5648d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Touch.html#ga9c511f1a000a7b7a1eae00e0ec54187f">TOUCH_CalibrationTable</a> (POINT *displayPtr, POINT *screenPtr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set calibration table.  <a href="group__Touch.html#ga9c511f1a000a7b7a1eae00e0ec54187f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MATRIX&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="touch_8c.html#adb83b736ec0cb3304d00c162e0b9e10e">calibrationMatrix</a> = { 103800, 2048, -8184704, -384, 102144, -16424640, 287650 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calibration table.  <a href="#adb83b736ec0cb3304d00c162e0b9e10e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>EFM32GG_DK3750, Touch panel driver. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Energy Micro AS </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0.0</dd></dl>
<h2><a class="anchor" id="License">
License</a></h2>
<p><b>(C) Copyright 2012 Energy Micro AS, <a href="http://www.energymicro.com">http://www.energymicro.com</a></b></p>
<p>Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions:</p>
<p>1. The origin of this software must not be misrepresented; you must not claim that you wrote the original software. 2. Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software. 3. This notice may not be removed or altered from any source distribution. 4. The source and compiled code may only be used on Energy Micro "EFM32" microcontrollers and "EFR4" radios.</p>
<p>DISCLAIMER OF WARRANTY/LIMITATION OF REMEDIES: Energy Micro AS has no obligation to support this Software. Energy Micro AS is providing the Software "AS IS", with no express or implied warranties of any kind, including, but not limited to, any implied warranties of merchantability or fitness for any particular purpose or warranties against infringement of any proprietary rights of a third party.</p>
<p>Energy Micro AS will not be liable for any consequential, incidental, or special damages, or any other relief, or for any claim by any third party, arising from your use of this Software. </p>

<p>Definition in file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a94976268f361ac7a0590250c779ff050"></a><!-- doxytag: member="touch.c::ADC_X" ref="a94976268f361ac7a0590250c779ff050" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_X&nbsp;&nbsp;&nbsp;adcSingleInpCh1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Input channel 1. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00055">55</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a7eacc77b3ea51ef3cd8dccff51bace25"></a><!-- doxytag: member="touch.c::ADC_Y" ref="a7eacc77b3ea51ef3cd8dccff51bace25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_Y&nbsp;&nbsp;&nbsp;adcSingleInpCh4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Input channel 4. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00056">56</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>, and <a class="el" href="touch_8c_source.html#l00349">TOUCH_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a68fb42f50f3eb1acfc00869488260dd8"></a><!-- doxytag: member="touch.c::TOUCH_X1" ref="a68fb42f50f3eb1acfc00869488260dd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOUCH_X1&nbsp;&nbsp;&nbsp;gpioPortD, 5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Port D5. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00059">59</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="af14aca3b903c90c70433d41fdb840a93"></a><!-- doxytag: member="touch.c::TOUCH_X2" ref="af14aca3b903c90c70433d41fdb840a93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOUCH_X2&nbsp;&nbsp;&nbsp;gpioPortD, 4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Port D4. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00060">60</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>, and <a class="el" href="touch_8c_source.html#l00327">TOUCH_IsBusy()</a>.</p>

</div>
</div>
<a class="anchor" id="a2168431fed386ed4cfec1127b055652a"></a><!-- doxytag: member="touch.c::TOUCH_Y1" ref="a2168431fed386ed4cfec1127b055652a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOUCH_Y1&nbsp;&nbsp;&nbsp;gpioPortD, 3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Port D3. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00061">61</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a347b052e8cb9e548e2aaebbb9d8ed405"></a><!-- doxytag: member="touch.c::TOUCH_Y2" ref="a347b052e8cb9e548e2aaebbb9d8ed405" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOUCH_Y2&nbsp;&nbsp;&nbsp;gpioPortD, 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Port D2. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00062">62</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a497f72fae656c2a34ecbb383925825f1"></a><!-- doxytag: member="touch.c::TOUCH_State_TypeDef" ref="a497f72fae656c2a34ecbb383925825f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="touch_8c.html#a497f72fae656c2a34ecbb383925825f1">TOUCH_State_TypeDef</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>touch driver states </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00065">65</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3611206d185a38b740457a748712c457"></a><!-- doxytag: member="touch.c::ADC0_IRQHandler" ref="a3611206d185a38b740457a748712c457" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADC0_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interrupt handler is executed with frequency ~28Hz when panel is not pressed and with frequency ~140Hz when panel is pressed - this will give ~50 readings per second. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00233">233</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>References <a class="el" href="touch_8c_source.html#l00055">ADC_X</a>, <a class="el" href="touch_8c_source.html#l00056">ADC_Y</a>, <a class="el" href="touch_8h_source.html#l00068">TOUCH_Pos_TypeDef::adcx</a>, <a class="el" href="touch_8h_source.html#l00069">TOUCH_Pos_TypeDef::adcy</a>, <a class="el" href="touch_8h_source.html#l00070">TOUCH_Pos_TypeDef::pen</a>, <a class="el" href="touch_8c_source.html#l00199">TOUCH_CallUpcall()</a>, <a class="el" href="touch_8c_source.html#l00172">TOUCH_RecalculatePosition()</a>, <a class="el" href="touch_8c_source.html#l00212">TOUCH_StateChanged()</a>, <a class="el" href="touch_8c_source.html#l00059">TOUCH_X1</a>, <a class="el" href="touch_8c_source.html#l00060">TOUCH_X2</a>, <a class="el" href="touch_8c_source.html#l00061">TOUCH_Y1</a>, <a class="el" href="touch_8c_source.html#l00062">TOUCH_Y2</a>, <a class="el" href="touch_8h_source.html#l00066">TOUCH_Pos_TypeDef::x</a>, and <a class="el" href="touch_8h_source.html#l00067">TOUCH_Pos_TypeDef::y</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c_a3611206d185a38b740457a748712c457_cgraph.png" border="0" usemap="#touch_8c_a3611206d185a38b740457a748712c457_cgraph_map" alt=""></div>
<map name="touch_8c_a3611206d185a38b740457a748712c457_cgraph_map" id="touch_8c_a3611206d185a38b740457a748712c457_cgraph">
<area shape="rect" id="node3" href="touch_8c.html#acfb04f99b85cf8e9f5ad80dfb27df268" title="Function that calls registered upcall." alt="" coords="205,5,331,32"/><area shape="rect" id="node5" href="touch_8c.html#a30a86d0450dd72a40b234efc1ff8d3e4" title="Convert ADC readings into XY position." alt="" coords="179,56,357,83"/><area shape="rect" id="node7" href="touch_8c.html#a8c55fa17e3875d085723400d8bce6279" title="Check if cursor state changed (down or move)." alt="" coords="193,107,343,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acfb04f99b85cf8e9f5ad80dfb27df268"></a><!-- doxytag: member="touch.c::TOUCH_CallUpcall" ref="acfb04f99b85cf8e9f5ad80dfb27df268" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TOUCH_CallUpcall </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function that calls registered upcall. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00199">199</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c_acfb04f99b85cf8e9f5ad80dfb27df268_icgraph.png" border="0" usemap="#touch_8c_acfb04f99b85cf8e9f5ad80dfb27df268_icgraph_map" alt=""></div>
<map name="touch_8c_acfb04f99b85cf8e9f5ad80dfb27df268_icgraph_map" id="touch_8c_acfb04f99b85cf8e9f5ad80dfb27df268_icgraph">
<area shape="rect" id="node3" href="touch_8c.html#a3611206d185a38b740457a748712c457" title="Interrupt handler is executed with frequency ~28Hz when panel is not pressed and..." alt="" coords="179,5,304,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30a86d0450dd72a40b234efc1ff8d3e4"></a><!-- doxytag: member="touch.c::TOUCH_RecalculatePosition" ref="a30a86d0450dd72a40b234efc1ff8d3e4" args="(volatile TOUCH_Pos_TypeDef *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TOUCH_RecalculatePosition </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="structTOUCH__Pos__TypeDef.html">TOUCH_Pos_TypeDef</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert ADC readings into XY position. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>Pointer to position structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00172">172</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>References <a class="el" href="touch_8h_source.html#l00068">TOUCH_Pos_TypeDef::adcx</a>, <a class="el" href="touch_8h_source.html#l00069">TOUCH_Pos_TypeDef::adcy</a>, <a class="el" href="touch_8h_source.html#l00070">TOUCH_Pos_TypeDef::pen</a>, <a class="el" href="touch_8h_source.html#l00066">TOUCH_Pos_TypeDef::x</a>, and <a class="el" href="touch_8h_source.html#l00067">TOUCH_Pos_TypeDef::y</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c_a30a86d0450dd72a40b234efc1ff8d3e4_icgraph.png" border="0" usemap="#touch_8c_a30a86d0450dd72a40b234efc1ff8d3e4_icgraph_map" alt=""></div>
<map name="touch_8c_a30a86d0450dd72a40b234efc1ff8d3e4_icgraph_map" id="touch_8c_a30a86d0450dd72a40b234efc1ff8d3e4_icgraph">
<area shape="rect" id="node3" href="touch_8c.html#a3611206d185a38b740457a748712c457" title="Interrupt handler is executed with frequency ~28Hz when panel is not pressed and..." alt="" coords="232,5,357,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c55fa17e3875d085723400d8bce6279"></a><!-- doxytag: member="touch.c::TOUCH_StateChanged" ref="a8c55fa17e3875d085723400d8bce6279" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TOUCH_StateChanged </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if cursor state changed (down or move). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if the cursor state has changed </dd></dl>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00212">212</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

<p>References <a class="el" href="touch_8h_source.html#l00070">TOUCH_Pos_TypeDef::pen</a>, <a class="el" href="touch_8h_source.html#l00066">TOUCH_Pos_TypeDef::x</a>, and <a class="el" href="touch_8h_source.html#l00067">TOUCH_Pos_TypeDef::y</a>.</p>

<p>Referenced by <a class="el" href="touch_8c_source.html#l00233">ADC0_IRQHandler()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="touch_8c_a8c55fa17e3875d085723400d8bce6279_icgraph.png" border="0" usemap="#touch_8c_a8c55fa17e3875d085723400d8bce6279_icgraph_map" alt=""></div>
<map name="touch_8c_a8c55fa17e3875d085723400d8bce6279_icgraph_map" id="touch_8c_a8c55fa17e3875d085723400d8bce6279_icgraph">
<area shape="rect" id="node3" href="touch_8c.html#a3611206d185a38b740457a748712c457" title="Interrupt handler is executed with frequency ~28Hz when panel is not pressed and..." alt="" coords="205,5,331,32"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="adb83b736ec0cb3304d00c162e0b9e10e"></a><!-- doxytag: member="touch.c::calibrationMatrix" ref="adb83b736ec0cb3304d00c162e0b9e10e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MATRIX <a class="el" href="touch_8c.html#adb83b736ec0cb3304d00c162e0b9e10e">calibrationMatrix</a> = { 103800, 2048, -8184704, -384, 102144, -16424640, 287650 }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calibration table. </p>

<p>Definition at line <a class="el" href="touch_8c_source.html#l00085">85</a> of file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>

</div>
</div>
</div>
<div id="footer">
<hr size="1"><address style="text-align: right;"><small>
Generated on Fri Nov 9 16:47:56 2012</small> for Board Support Package by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a><small> 1.6.3 </small></address></div>
</body>
</html>
